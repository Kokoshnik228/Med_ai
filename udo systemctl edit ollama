[0;1;34m# ]8;;file://srv-ai/etc/systemd/system/ollama.service/etc/systemd/system/ollama.service]8;;[0m
[0;1;36m[Unit][0m
Description=Ollama Service
After=network-online.target
[0;1;38;5;245m[0m
[0;1;36m[Service][0m
ExecStart=/usr/local/bin/ollama serve
User=ollama
Group=ollama
Restart=always
RestartSec=3
Environment="PATH=/home/toor/ClinicalRecommendations/med_ai/.venv/bin:/home/toor/.vscode-server/cli/servers/Stable-7d842fb85a0275a4a8e4d7e040d2625abbf7f084/server/bin/remote-cli:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/toor/.vscode-server/extensions/ms-python.debugpy-2025.14.1-linux-x64/bundled/scripts/noConfigScripts"
[0;1;38;5;245m[0m
[0;1;36m[Install][0m
WantedBy=default.target

[0;1;34m# ]8;;file://srv-ai/etc/systemd/system/ollama.service.d/gpu.conf/etc/systemd/system/ollama.service.d/gpu.conf]8;;[0m
[0;1;36m[Service][0m
[0;1;38;5;245m# —Å–ª—É—à–∞–µ–º –Ω–∞ 11434 (–±–æ–µ–≤–æ–π –ø–æ—Ä—Ç –¥–ª—è —Ç–≤–æ–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)[0m
Environment=OLLAMA_HOST=0.0.0.0:11434
[0;1;38;5;245m[0m
[0;1;38;5;245m# —Ñ–æ—Ä—Å–∏–º cuBLAS –∏ —Ä–∞–∑—Ä–µ—à–∞–µ–º CUDA[0m
Environment=OLLAMA_LLM_LIBRARY=cublas
Environment=OLLAMA_NO_CUDA=0
[0;1;38;5;245m[0m
[0;1;38;5;245m# —á—Ç–æ–±—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ç–æ—á–Ω–æ –Ω–∞—à–ª–∏—Å—å CUDA-–ª–∏–±—ã[0m
Environment=LD_LIBRARY_PATH=/usr/local/cuda/targets/x86_64-linux/lib:/usr/lib/x86_64-linux-gnu
[0;1;38;5;245m[0m
[0;1;38;5;245m# (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) –æ–≥—Ä–∞–Ω–∏—á–∏–º –Ω–∞ 1 GPU[0m
Environment=CUDA_VISIBLE_DEVICES=0

[0;1;34m# ]8;;file://srv-ai/etc/systemd/system/ollama.service.d/override.conf/etc/systemd/system/ollama.service.d/override.conf]8;;[0m
[0;1;36m[Service][0m
[0;1;38;5;245m# –î–æ—Å—Ç—É–ø –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º NVIDIA[0m
PrivateDevices=no
DevicePolicy=auto
DeviceAllow=/dev/nvidiactl rw
DeviceAllow=/dev/nvidia-uvm rw
DeviceAllow=/dev/nvidia-uvm-tools rw
DeviceAllow=/dev/nvidia-modeset rw
DeviceAllow=/dev/nvidia0 rw
[0;1;38;5;245m# DeviceAllow=/dev/nvidia1 rw  # –µ—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è –≤—Ç–æ—Ä–∞—è –∫–∞—Ä—Ç–∞[0m
[0;1;38;5;245m[0m
[0;1;38;5;245m# –ò–Ω–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ caps-–Ω–æ–¥–∞–º –¥–ª—è NVML[0m
DeviceAllow=/dev/nvidia-caps/nvidia-cap1 r
DeviceAllow=/dev/nvidia-caps/nvidia-cap2 r
[0;1;38;5;245m[0m
[0;1;38;5;245m# –î–æ–±–∞–≤–ª—è–µ–º –≥—Ä—É–ø–ø—ã —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ /dev/nvidia*[0m
SupplementaryGroups=video render
[0;1;38;5;245m[0m
[0;1;38;5;245m# –†–∞–∑—Ä–µ—à–∞–µ–º ¬´–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ¬ª –Ω–æ–≤—ã–µ GPU –≤ ggml (5090 –∏ —Ç.–ø.)[0m
Environment=GGML_CUDA_ENABLE_UNSUPPORTED_DEVICES=1
[0;1;38;5;245m[0m
[0;1;38;5;245m# –§–æ—Ä—Å–∏–º CUDA/cuBLAS[0m
Environment=OLLAMA_LLM_LIBRARY=cublas
Environment=OLLAMA_NO_CUDA=0
Environment=CUDA_VISIBLE_DEVICES=0
[0;1;38;5;245m[0m
[0;1;38;5;245m# –ü–æ–ª–µ–∑–Ω—ã–µ env[0m
Environment=OLLAMA_KEEP_ALIVE=30m
Environment=OLLAMA_CONTEXT_LENGTH=16384
Environment=LD_LIBRARY_PATH=/usr/local/cuda/targets/x86_64-linux/lib:/usr/lib/x86_64-linux-gnu
Environment=PATH=/usr/local/cuda/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
